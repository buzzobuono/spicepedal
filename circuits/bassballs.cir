* Envelope Filter - test per basso elettrico
* Topologia simile al Bassballs, componenti generici

* Alimentazione
VCC 10 0 DC 9
VEE 11 0 DC -9

* --- Ingresso + Buffer ---
C_in 1 2 0.1u
R_in 2 0 47k
O1 3 2 3 10 11 TL072 Rout=75 Imax=0.020 Gain=10000 Sr=13

* --- Envelope Follower ---
* Diodo low-threshold per 15 mV input
D1 3 4 D_LOW Is=2e-5 N=1 Vt=0.02585 Cj0=1.15e-12 Vj=0.74 Mj=0.02

C1 4 0 1u
R1 4 0 47k

* --- Envelope-Controlled Filter ---
* Primo stadio filtro modulato
R_mod1 3 5 47k
R_mod2 5 4 2.7k
C_mod1 5 6 0.047u
O2 6 5 6 10 11 TL072 Rout=75 Imax=0.020 Gain=10000 Sr=13

* Secondo stadio filtro modulato
R_mod3 6 7 47k
R_mod4 7 4 2.7k
C_mod2 7 8 0.047u
O3 8 7 8 10 11 TL072 Rout=75 Imax=0.020 Gain=10000 Sr=13

* Miscelazione e buffer di uscita
R_mix1 6 9 4.7k
R_mix2 8 9 4.7k
O4 10 9 10 10 11 TL072 Rout=75 Imax=0.020 Gain=10000 Sr=13

* Segnali di simulazione
.input 1
.output 10
.probe bassballs.csv V(1) V(3) V(4) V(6) V(8) V(10)
.warmup 5