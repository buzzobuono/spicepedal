* Envelope filter stabile per basso
VCC 10 0 DC 9
VEE 11 0 DC -9

* Ingresso
C_in 1 2 0.1u
R_in 2 0 47k

* Buffer ingresso
O1 3 2 3 10 11 TL072 Rout=75 Imax=0.02 Gain=1000 Sr=5

* Envelope follower
D1 3 4 D_LOW Is=1e-15 N=1 Vt=0.026 Cj0=2e-12 Vj=0.2 Mj=0.5
C1 4 0 1u
R1 4 0 47k

* Sommatore + LPF modulato
* V(3) = ingresso filtrato
* V(4) = envelope controlla peso del segnale
O2 5 3 5 10 11 TL072 Rout=75 Imax=0.02 Gain=1000 Sr=5
R2 3 5 47k
R3 4 5 47k
C2 5 0 100e-9

.input 1
.output 5
.probe stable_envfilter.csv V(1) V(3) V(4) V(5)
.warmup 60